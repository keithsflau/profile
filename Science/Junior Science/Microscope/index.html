<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F1 Science: The Microscope Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Custom CSS for the cell pattern */
        .cell-pattern {
            background-color: #e5e5f7;
            opacity: 0.8;
            background-image:  radial-gradient(#444cf7 0.5px, transparent 0.5px), radial-gradient(#444cf7 0.5px, #e5e5f7 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
        }

        .microscope-view {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            border: 10px solid #1f2937;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.5);
        }

        .slide-sample {
            width: 100%;
            height: 100%;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        /* Range Slider Styling */
        input[type=range] {
            -webkit-appearance: none; 
            background: transparent; 
        }
        
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
            margin-top: -8px; 
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #d1d5db;
            border-radius: 2px;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Navbar -->
    <nav class="bg-blue-900 text-white p-4 sticky top-0 z-50 shadow-lg">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i data-lucide="microscope" class="w-8 h-8 text-blue-300"></i>
                <div>
                    <h1 class="font-bold text-xl">HK F1 Science Lab</h1>
                    <p class="text-xs text-blue-200">Engineer's Guide to Microscopy</p>
                </div>
            </div>
            <div class="hidden md:flex space-x-6 text-sm font-semibold">
                <a href="#parts" class="hover:text-blue-300 transition">Parts</a>
                <a href="#simulator" class="hover:text-blue-300 transition">Simulator</a>
                <a href="#quiz" class="hover:text-blue-300 transition">Quiz</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="bg-white border-b border-slate-200">
        <div class="max-w-6xl mx-auto px-4 py-12 text-center">
            <h2 class="text-3xl md:text-5xl font-bold text-slate-900 mb-4">Mastering the Microscope</h2>
            <p class="text-lg text-slate-600 max-w-2xl mx-auto">
                Welcome, Form 1 Students. As engineers, we need precise tools to observe the world. 
                Today we learn how to handle the light microscope safely and effectively.
            </p>
            <div class="mt-8 flex justify-center gap-4">
                <a href="#simulator" class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-700 transition flex items-center gap-2">
                    <i data-lucide="play-circle" class="w-5 h-5"></i> Start Simulation
                </a>
            </div>
        </div>
    </header>

    <!-- Part 1: Interactive Diagram -->
    <section id="parts" class="max-w-6xl mx-auto px-4 py-16">
        <div class="flex flex-col md:flex-row gap-12 items-start">
            
            <!-- Left: Visual Representation (SVG built with Tailwind) -->
            <div class="w-full md:w-1/2 flex justify-center relative bg-white p-8 rounded-2xl shadow-sm border border-slate-100">
                <!-- Abstract Microscope Illustration -->
                <svg viewBox="0 0 200 300" class="w-64 h-96 drop-shadow-xl">
                    <!-- Base -->
                    <path d="M40,280 Q40,290 50,290 L150,290 Q160,290 160,280 L160,260 L40,260 Z" fill="#334155" id="part-base" class="hover:fill-blue-600 cursor-pointer transition part-trigger" onclick="selectPart('Base')"/>
                    <!-- Arm -->
                    <path d="M60,260 Q50,200 60,150 Q70,100 100,80 L120,80" fill="none" stroke="#475569" stroke-width="20" stroke-linecap="round" id="part-arm" class="hover:stroke-blue-600 cursor-pointer transition part-trigger" onclick="selectPart('Arm')"/>
                    <!-- Eyepiece Tube -->
                    <rect x="110" y="20" width="20" height="60" fill="#94a3b8" transform="rotate(-10 120 50)"/>
                    <rect x="108" y="10" width="24" height="15" fill="#1e293b" transform="rotate(-10 120 50)" id="part-eyepiece" class="hover:fill-blue-600 cursor-pointer transition part-trigger" onclick="selectPart('Eyepiece')"/>
                    <!-- Objectives -->
                    <circle cx="120" cy="110" r="15" fill="#334155"/> <!-- Nosepiece -->
                    <rect x="115" y="125" width="10" height="20" fill="#cbd5e1" id="part-objective" class="hover:fill-blue-600 cursor-pointer transition part-trigger" onclick="selectPart('Objective Lens')"/>
                    <rect x="130" y="120" width="10" height="15" fill="#cbd5e1" transform="rotate(-20 135 120)" class="part-trigger"/>
                    <!-- Stage -->
                    <rect x="50" y="160" width="100" height="10" fill="#1e293b" id="part-stage" class="hover:fill-blue-600 cursor-pointer transition part-trigger" onclick="selectPart('Stage')"/>
                    <!-- Light -->
                    <circle cx="100" cy="240" r="15" fill="#facc15" stroke="#334155" stroke-width="2" id="part-light" class="hover:stroke-blue-600 cursor-pointer transition part-trigger" onclick="selectPart('Light Source / Mirror')"/>
                    
                    <!-- Knobs (Separated for clarity) -->
                    <!-- Coarse Adjustment -->
                    <circle cx="60" cy="195" r="12" fill="#1e293b" id="part-coarse" class="hover:fill-blue-600 cursor-pointer transition part-trigger" onclick="selectPart('Coarse Adjustment Knob')"/>
                    <!-- Fine Adjustment (Moved down slightly to be distinct) -->
                    <circle cx="60" cy="225" r="8" fill="#94a3b8" id="part-fine" class="hover:fill-blue-600 cursor-pointer transition part-trigger" onclick="selectPart('Fine Adjustment Knob')"/>
                </svg>

                <div class="absolute top-4 left-4 bg-yellow-100 text-yellow-800 text-xs font-bold px-2 py-1 rounded">
                    Click a part!
                </div>
            </div>

            <!-- Right: Explanations -->
            <div class="w-full md:w-1/2 space-y-6">
                <div class="mb-4">
                    <h3 class="text-2xl font-bold text-blue-900 border-b-2 border-blue-200 pb-2">Microscope Anatomy</h3>
                    <p class="text-slate-500 mt-2 text-sm">Select a part on the diagram or the list below to learn its function.</p>
                </div>

                <div id="part-display" class="bg-blue-50 p-6 rounded-xl border border-blue-100 min-h-[160px] transition-all duration-300">
                    <h4 id="part-title" class="text-xl font-bold text-blue-800">Select a part...</h4>
                    <p id="part-desc" class="text-slate-700 mt-2">The description will appear here.</p>
                    <div id="part-tip" class="mt-4 text-xs font-mono text-blue-600 bg-white inline-block px-2 py-1 rounded border border-blue-200 hidden">
                        Engineer's Tip: <span id="part-tip-text"></span>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-2 text-sm">
                    <button onclick="selectPart('Eyepiece')" class="p-2 text-left hover:bg-slate-100 rounded">üëÅÔ∏è Eyepiece</button>
                    <button onclick="selectPart('Objective Lens')" class="p-2 text-left hover:bg-slate-100 rounded">üî≠ Objective Lens</button>
                    <button onclick="selectPart('Stage')" class="p-2 text-left hover:bg-slate-100 rounded">üìè Stage & Clips</button>
                    <button onclick="selectPart('Coarse Adjustment Knob')" class="p-2 text-left hover:bg-slate-100 rounded">‚öôÔ∏è Coarse Knob</button>
                    <button onclick="selectPart('Fine Adjustment Knob')" class="p-2 text-left hover:bg-slate-100 rounded">üîß Fine Knob</button>
                    <button onclick="selectPart('Diaphragm')" class="p-2 text-left hover:bg-slate-100 rounded">‚òÄÔ∏è Diaphragm</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Part 2: Simulation Lab -->
    <section id="simulator" class="bg-slate-900 text-white py-16">
        <div class="max-w-4xl mx-auto px-4">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold mb-2">Virtual Focusing Lab</h2>
                <p class="text-slate-400">Step 1: Calculate Magnification. Step 2: Bring the image into focus.</p>
            </div>

            <div class="bg-slate-800 p-6 rounded-2xl shadow-2xl flex flex-col md:flex-row gap-8 items-center">
                
                <!-- The Viewport -->
                <div class="relative">
                    <div class="microscope-view bg-white relative">
                        <div id="slide-image" class="slide-sample w-full h-full flex flex-col justify-center items-center text-center">
                            <!-- SVG Onion Cell Pattern - Flat Pentagon Variant -->
                            <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                                <defs>
                                    <pattern id="onionCellsPentagon" x="0" y="0" width="100" height="60" patternUnits="userSpaceOnUse" patternTransform="rotate(2)">
                                        
                                        <!-- Row 1: Flat Pentagons -->
                                        <!-- Cell 1: (0,0) -> (80,0) -> (90,15) -> (80,30) -> (0,30) -->
                                        <!-- This creates an elongated 5-sided shape pointing right -->
                                        <polygon points="0,2 80,2 90,15 80,28 0,28" fill="#f3e8ff" stroke="#7e22ce" stroke-width="2"/>
                                        
                                        <!-- Row 2: Shifted and Flipped? -->
                                        <!-- To tessellate nicely, we just offset the next row -->
                                        <!-- Cell 2: Starting at y=30 -->
                                        <polygon points="50,32 130,32 140,45 130,58 50,58" fill="#f3e8ff" stroke="#7e22ce" stroke-width="2"/>
                                        <polygon points="-50,32 30,32 40,45 30,58 -50,58" fill="#f3e8ff" stroke="#7e22ce" stroke-width="2"/>

                                        <!-- Nuclei (Dark Purple) -->
                                        <circle cx="45" cy="15" r="3.5" fill="#581c87" opacity="0.8"/>
                                        <circle cx="95" cy="45" r="3.5" fill="#581c87" opacity="0.8"/>
                                        
                                    </pattern>
                                </defs>
                                <!-- Background base -->
                                <rect width="100%" height="100%" fill="#fae8ff"/>
                                <!-- The Pattern Layer -->
                                <rect x="-50%" y="-50%" width="200%" height="200%" fill="url(#onionCellsPentagon)" />
                            </svg>
                        </div>
                        <!-- Overlay for Grid -->
                        <div class="absolute inset-0 pointer-events-none opacity-20 bg-[url('https://www.transparenttextures.com/patterns/graphy.png')]"></div>
                    </div>
                    <div class="absolute -bottom-4 -right-4 bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg">
                        Total: <span id="total-mag-display">40</span>X
                    </div>
                </div>

                <!-- The Controls -->
                <div class="flex-1 w-full space-y-8">
                    
                    <!-- Calculator -->
                    <div class="bg-slate-700 p-4 rounded-lg">
                        <h4 class="text-blue-300 font-bold mb-3 text-sm uppercase tracking-wider">1. Magnification</h4>
                        <div class="flex items-center gap-2">
                            <div class="bg-slate-900 px-3 py-2 rounded text-center">
                                <span class="text-xs text-slate-400 block">Eyepiece</span>
                                <span class="font-mono text-lg font-bold">10X</span>
                            </div>
                            <span class="text-xl">√ó</span>
                            <div class="flex-1">
                                <span class="text-xs text-slate-400 block mb-1">Objective Lens</span>
                                <select id="objective-select" onchange="updateMagnification()" class="w-full bg-slate-600 border border-slate-500 rounded px-2 py-2 text-white focus:outline-none focus:border-blue-500">
                                    <option value="4">4X (Low Power)</option>
                                    <option value="10">10X (Medium Power)</option>
                                    <option value="40">40X (High Power)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Focus Knobs -->
                    <div class="bg-slate-700 p-4 rounded-lg">
                        <h4 class="text-blue-300 font-bold mb-3 text-sm uppercase tracking-wider">2. Focusing</h4>
                        
                        <div class="mb-4">
                            <label class="flex justify-between text-xs mb-1">
                                <span>Coarse Adjustment (Rough)</span>
                                <span id="coarse-val" class="font-mono">0</span>
                            </label>
                            <input type="range" id="coarse-slider" min="0" max="100" value="0" class="w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer" oninput="updateFocus()">
                        </div>

                        <div>
                            <label class="flex justify-between text-xs mb-1">
                                <span>Fine Adjustment (Sharp)</span>
                                <span id="fine-val" class="font-mono">50</span>
                            </label>
                            <input type="range" id="fine-slider" min="0" max="100" value="50" class="w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer" oninput="updateFocus()">
                        </div>

                        <div id="focus-feedback" class="mt-3 text-center text-sm font-bold text-yellow-400 h-5">
                            <!-- JS feedback -->
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

    <!-- Part 3: Safety & Quiz -->
    <section id="quiz" class="max-w-4xl mx-auto px-4 py-16">
        <div class="grid md:grid-cols-2 gap-12">
            
            <!-- Safety Checklist -->
            <div>
                <h3 class="text-2xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                    <i data-lucide="clipboard-check" class="text-green-600"></i>
                    Safety Protocol
                </h3>
                <ul class="space-y-3">
                    <li class="flex items-start gap-3 bg-green-50 p-3 rounded-lg border border-green-100">
                        <i data-lucide="check-circle-2" class="w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"></i>
                        <span class="text-slate-700 text-sm">Always carry with two hands: one on the <strong>Arm</strong>, one under the <strong>Base</strong>.</span>
                    </li>
                    <li class="flex items-start gap-3 bg-green-50 p-3 rounded-lg border border-green-100">
                        <i data-lucide="check-circle-2" class="w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"></i>
                        <span class="text-slate-700 text-sm">Start focusing with the <strong>Low Power</strong> objective lens first.</span>
                    </li>
                    <li class="flex items-start gap-3 bg-red-50 p-3 rounded-lg border border-red-100">
                        <i data-lucide="alert-triangle" class="w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"></i>
                        <span class="text-slate-700 text-sm">Never use the Coarse Adjustment knob with the High Power lens (you might crack the slide!).</span>
                    </li>
                </ul>
            </div>

            <!-- Mini Quiz -->
            <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                <h3 class="text-xl font-bold text-slate-800 mb-4">Quick Check</h3>
                
                <div id="quiz-container">
                    <div class="mb-4">
                        <p class="font-medium text-slate-900 mb-3">1. If the Eyepiece is 10X and the Objective is 40X, what is the total magnification?</p>
                        <div class="space-y-2">
                            <button onclick="checkAnswer(this, false)" class="w-full text-left p-2 border rounded hover:bg-slate-50 transition text-sm">A. 50X</button>
                            <button onclick="checkAnswer(this, true)" class="w-full text-left p-2 border rounded hover:bg-slate-50 transition text-sm">B. 400X</button>
                            <button onclick="checkAnswer(this, false)" class="w-full text-left p-2 border rounded hover:bg-slate-50 transition text-sm">C. 4000X</button>
                        </div>
                    </div>
                </div>
                <div id="quiz-feedback" class="text-sm font-bold text-center h-6 mt-2"></div>
            </div>
        </div>
    </section>

            <!-- Footer -->
    <footer style="text-align: center; padding: 1rem; color: #707070; font-size: 0.875rem;">
        <p style="font-style: italic; margin-bottom: 0.25rem;">But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his understanding. Jeremiah 10:12</p>
        <p style="font-size: 0.75rem; margin-bottom: 0.25rem; margin-top: 0.5rem;">„ÄåËÄ∂ÂíåËèØÁî®ËÉΩÂäõÂâµÈÄ†Â§ßÂú∞ÔºåÁî®Êô∫ÊÖßÂª∫Á´ã‰∏ñÁïåÔºåÁî®ËÅ∞ÊòéÈã™ÂºµÁ©πËíº„ÄÇ„Äç ËÄ∂Âà©Á±≥Êõ∏ 10:12</p>
        <p style="font-size: 0.75rem; margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid #d1d5db;">@ 2025 Generated by Gemini Pro 3.0  Prepared by SF Lau</p>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // Initialize Icons
        lucide.createIcons();

        // --- PART 1: Interactive Diagram Logic ---
        const partData = {
            'Eyepiece': {
                desc: "The lens you look through. Usually has 10X magnification.",
                tip: "Keep this clean! Eyelash oil makes it blurry."
            },
            'Objective Lens': {
                desc: "Three lenses (4X, 10X, 40X) that gather light from the object.",
                tip: "Always start with the shortest (Red/4X) lens."
            },
            'Stage': {
                desc: "The flat platform where you place your slide.",
                tip: "Make sure the slide is clipped in tight."
            },
            'Coarse Adjustment Knob': {
                desc: "The large knob. Moves the stage up and down quickly.",
                tip: "NEVER use this on High Power!"
            },
            'Fine Adjustment Knob': {
                desc: "The small knob. Sharpens the image slightly.",
                tip: "Use this only after you have a rough image."
            },
            'Base': {
                desc: "The bottom support of the microscope.",
                tip: "Place your hand under here when carrying it."
            },
            'Arm': {
                desc: "Connects the tube to the base.",
                tip: "Hold this part firmly when carrying."
            },
            'Light Source / Mirror': {
                desc: "Provides light to see the specimen.",
                tip: "If using a mirror, don't reflect direct sunlight (eye damage!)."
            },
            'Diaphragm': {
                desc: "Controls how much light passes through the stage.",
                tip: "Too much light can wash out the details."
            }
        };

        function selectPart(partName) {
            const displayTitle = document.getElementById('part-title');
            const displayDesc = document.getElementById('part-desc');
            const displayTip = document.getElementById('part-tip');
            const displayTipText = document.getElementById('part-tip-text');

            if (partData[partName]) {
                displayTitle.innerText = partName;
                displayDesc.innerText = partData[partName].desc;
                displayTipText.innerText = partData[partName].tip;
                displayTip.classList.remove('hidden');
                
                // Highlight logic could go here (adding classes to SVG elements)
            }
        }

        // --- PART 2: Simulation Logic ---
        const coarseSlider = document.getElementById('coarse-slider');
        const fineSlider = document.getElementById('fine-slider');
        const slideImage = document.getElementById('slide-image');
        const objectiveSelect = document.getElementById('objective-select');
        const totalMagDisplay = document.getElementById('total-mag-display');
        const feedback = document.getElementById('focus-feedback');

        // Target values for "Perfect Focus"
        const perfectCoarse = 65; 
        const perfectFine = 50;

        function updateMagnification() {
            const objectiveVal = parseInt(objectiveSelect.value);
            const total = 10 * objectiveVal;
            totalMagDisplay.innerText = total;

            // Reset focus when changing lens (simulating reality)
            coarseSlider.value = 0; 
            updateFocus();

            // Visual zoom effect (simulated by scaling text/bg)
            let scale = 1;
            if(objectiveVal === 4) scale = 1;
            if(objectiveVal === 10) scale = 1.5;
            if(objectiveVal === 40) scale = 2.5;
            
            slideImage.style.transform = `scale(${scale})`;
        }

        function updateFocus() {
            const cVal = parseInt(coarseSlider.value);
            const fVal = parseInt(fineSlider.value);

            // Update numerical display
            document.getElementById('coarse-val').innerText = cVal;
            document.getElementById('fine-val').innerText = fVal;

            // Calculate "Blur" distance from perfect focus
            // Coarse has huge impact, Fine has small impact
            let distCoarse = Math.abs(cVal - perfectCoarse);
            let distFine = Math.abs(fVal - perfectFine);
            
            // Total blur factor
            let blurAmount = (distCoarse * 0.8) + (distFine * 0.1);

            // Apply blur
            slideImage.style.filter = `blur(${blurAmount}px)`;

            // Feedback
            if (blurAmount < 1) {
                feedback.innerText = "Perfect Focus! ‚úÖ";
                feedback.className = "mt-3 text-center text-sm font-bold text-green-400 h-5";
            } else if (blurAmount < 5) {
                feedback.innerText = "Almost there... use Fine Knob";
                feedback.className = "mt-3 text-center text-sm font-bold text-yellow-400 h-5";
            } else {
                feedback.innerText = "Image is blurry.";
                feedback.className = "mt-3 text-center text-sm font-bold text-red-400 h-5";
            }
        }

        // --- PART 3: Quiz Logic ---
        function checkAnswer(btn, isCorrect) {
            const feedback = document.getElementById('quiz-feedback');
            const parent = btn.parentElement;
            
            // Reset styles
            Array.from(parent.children).forEach(b => {
                b.classList.remove('bg-green-100', 'bg-red-100', 'border-green-500', 'border-red-500');
            });

            if (isCorrect) {
                btn.classList.add('bg-green-100', 'border-green-500');
                feedback.innerText = "Correct! 10 x 40 = 400.";
                feedback.classList.add('text-green-600');
                feedback.classList.remove('text-red-600');
            } else {
                btn.classList.add('bg-red-100', 'border-red-500');
                feedback.innerText = "Try again. Multiply the two numbers.";
                feedback.classList.add('text-red-600');
                feedback.classList.remove('text-green-600');
            }
        }

        // Initialize simulation
        updateMagnification();
    </script>
</body>
</html>

        // Initialize simulation
        updateMagnification();
    </script>
</body>
</html>

        // Initialize simulation
        updateMagnification();
    </script>
</body>
</html>

        // Initialize simulation
        updateMagnification();
    </script>
</body>
</html>

        // Initialize simulation
        updateMagnification();
    </script>
</body>
</html>