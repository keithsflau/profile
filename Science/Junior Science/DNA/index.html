<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNA: The Code of Life | F1 Science</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans', sans-serif;
            scroll-behavior: smooth;
        }
        .base-btn {
            transition: all 0.2s;
        }
        .base-btn:active {
            transform: scale(0.95);
        }
        /* Custom scrollbar for better UX */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #6366f1;
            border-radius: 4px;
        }
        /* New Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(5deg); }
        }
        .animate-float {
            animation: float 4s ease-in-out infinite;
        }
        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop {
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-indigo-600 text-white shadow-lg">
        <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="font-bold text-xl flex items-center gap-2">
                <svg class="w-6 h-6 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                F1 Science: DNA
            </div>
            <div class="hidden md:flex space-x-6">
                <a href="#intro" class="hover:text-indigo-200 transition">Basics</a>
                <a href="#structure" class="hover:text-indigo-200 transition">Structure</a>
                <a href="#game" class="bg-white text-indigo-600 px-4 py-1 rounded-full font-bold hover:bg-indigo-50 transition">Play Game</a>
                <a href="#quiz" class="hover:text-indigo-200 transition">Quiz</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header id="intro" class="relative bg-gradient-to-br from-indigo-900 to-purple-800 text-white py-20 overflow-hidden min-h-[500px] flex items-center">
        <!-- Canvas Background for Animation -->
        <!-- Increased opacity and ensured positioning -->
        <canvas id="dnaCanvas" class="absolute top-0 left-0 w-full h-full opacity-60"></canvas>
        
        <div class="relative max-w-4xl mx-auto px-4 text-center z-10 pointer-events-none">
            <span class="inline-block py-1 px-3 rounded-full bg-indigo-500/50 border border-indigo-400 text-sm font-semibold mb-4 backdrop-blur-sm">Form 1 Biology Module</span>
            <h1 class="text-4xl md:text-6xl font-bold mb-6 tracking-tight drop-shadow-lg">Deoxyribonucleic Acid</h1>
            <p class="text-xl md:text-2xl text-indigo-100 mb-8 max-w-2xl mx-auto drop-shadow-md">
                Imagine a recipe book so small it fits inside a cell, but so complex it defines exactly who you are. That is DNA.
            </p>
            <div class="flex flex-col sm:flex-row justify-center gap-4 pointer-events-auto">
                <a href="#learn" class="px-8 py-3 bg-white text-indigo-900 rounded-lg font-bold shadow-lg hover:shadow-xl hover:scale-105 transition transform">Start Learning</a>
                <a href="#game" class="px-8 py-3 bg-indigo-800/50 border-2 border-indigo-300 rounded-lg font-bold hover:bg-indigo-700/50 transition backdrop-blur-sm">Launch Simulator</a>
            </div>
        </div>
    </header>

    <!-- Learning Section: The Blueprint -->
    <section id="learn" class="py-16 px-4">
        <div class="max-w-5xl mx-auto">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-800 mb-4">What is DNA?</h2>
                <div class="h-1 w-20 bg-indigo-500 mx-auto rounded"></div>
            </div>

            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="space-y-6">
                    <div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-indigo-500">
                        <h3 class="text-xl font-bold text-indigo-700 mb-2">The Blueprint of Life</h3>
                        <p class="text-slate-600">
                            Just like an engineer uses a blueprint to build a skyscraper, your body uses DNA as instructions to build <strong>you</strong>. It determines your eye color, hair type, and even how tall you might grow.
                        </p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-purple-500">
                        <h3 class="text-xl font-bold text-purple-700 mb-2">Where is it found?</h3>
                        <p class="text-slate-600">
                            DNA is found inside the <strong>Nucleus</strong> of almost every cell in your body. It is tightly packed into structures called <strong>Chromosomes</strong>.
                        </p>
                    </div>
                </div>
                <div class="bg-slate-200 rounded-xl h-64 md:h-80 flex items-center justify-center relative overflow-hidden group">
                    <div class="text-center">
                        <div class="text-4xl md:text-6xl mb-4 flex items-center gap-4 justify-center">
                            <span>cell</span> 
                            <span class="animate-pulse">‚û°Ô∏è</span> 
                            <span>nucleus</span> 
                            <span class="animate-pulse">‚û°Ô∏è</span> 
                            <span class="animate-float text-7xl inline-block">üß¨</span>
                        </div>
                        <p class="text-slate-500 font-medium mt-4">From Cell to DNA</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Structure Section -->
    <section id="structure" class="bg-slate-100 py-16 px-4">
        <div class="max-w-5xl mx-auto">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-800 mb-4">The Double Helix Structure</h2>
                <p class="text-slate-600 max-w-2xl mx-auto">DNA looks like a twisted ladder. We call this shape a <strong>Double Helix</strong>.</p>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <!-- Component 1 -->
                <div class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition group cursor-pointer">
                    <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 mb-4 text-2xl group-hover:animate-bounce">ü™ú</div>
                    <h3 class="font-bold text-lg mb-2">The Backbone</h3>
                    <p class="text-sm text-slate-600">The sides of the ladder are made of sugar and phosphate. They hold everything together.</p>
                </div>

                <!-- Component 2 -->
                <div class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition group cursor-pointer">
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-4 text-2xl group-hover:animate-bounce">üß©</div>
                    <h3 class="font-bold text-lg mb-2">The Bases (Rungs)</h3>
                    <p class="text-sm text-slate-600">The steps of the ladder are pairs of nitrogenous bases. There are 4 types: A, T, C, and G.</p>
                </div>

                <!-- Component 3 -->
                <div class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition group cursor-pointer">
                    <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center text-red-600 mb-4 text-2xl group-hover:animate-bounce">ü§ù</div>
                    <h3 class="font-bold text-lg mb-2">Base Pairing Rule</h3>
                    <p class="text-sm text-slate-600">
                        Key Rule:<br>
                        <span class="text-indigo-600 font-bold">A</span> pairs with <span class="text-indigo-600 font-bold">T</span><br>
                        <span class="text-pink-600 font-bold">C</span> pairs with <span class="text-pink-600 font-bold">G</span>
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Game Section -->
    <section id="game" class="py-16 px-4 bg-indigo-900 text-white">
        <div class="max-w-4xl mx-auto">
            <div class="text-center mb-10">
                <span class="text-indigo-300 font-bold tracking-wider uppercase text-sm">Interactive Lab</span>
                <h2 class="text-3xl font-bold mb-4">DNA Replication Engineer</h2>
                <p class="text-indigo-200">
                    Your job is to build the matching strand of DNA. Remember the rules: <br>
                    <strong>A ‚ÜîÔ∏è T</strong> (Apple in the Tree) <br> 
                    <strong>C ‚ÜîÔ∏è G</strong> (Car in the Garage)
                </p>
            </div>

            <!-- Game Container -->
            <div class="bg-slate-800 rounded-2xl p-4 md:p-8 shadow-2xl border border-slate-700">
                
                <!-- Scoreboard -->
                <div class="flex justify-between items-center mb-8 bg-slate-700/50 p-4 rounded-lg">
                    <div>
                        <span class="text-slate-400 text-sm">Status</span>
                        <div id="gameStatus" class="font-bold text-green-400">Ready to Sequence</div>
                    </div>
                    <div class="text-right">
                        <span class="text-slate-400 text-sm">Score</span>
                        <div class="text-2xl font-mono" id="scoreDisplay">0</div>
                    </div>
                </div>

                <!-- The DNA Display -->
                <div class="flex flex-col items-center gap-4 mb-8">
                    <!-- Template Strand (Top) -->
                    <div class="flex gap-2 md:gap-4 overflow-x-auto pb-2 w-full justify-center" id="templateStrand">
                        <!-- Generated by JS -->
                    </div>

                    <!-- Connection Lines -->
                    <div class="w-full h-8 flex justify-center items-center gap-2 md:gap-4 opacity-50">
                        <div class="w-10 md:w-16 flex justify-center text-xl animate-pulse">‚¨áÔ∏è</div>
                    </div>

                    <!-- User Strand (Bottom - Empty slots) -->
                    <div class="flex gap-2 md:gap-4 w-full justify-center" id="userStrand">
                        <!-- Generated by JS -->
                    </div>
                </div>

                <!-- Controls -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-lg mx-auto">
                    <button onclick="handleInput('A')" class="base-btn p-4 rounded-xl bg-green-600 hover:bg-green-500 font-bold text-2xl shadow-lg border-b-4 border-green-800">A</button>
                    <button onclick="handleInput('T')" class="base-btn p-4 rounded-xl bg-yellow-600 hover:bg-yellow-500 font-bold text-2xl shadow-lg border-b-4 border-yellow-800">T</button>
                    <button onclick="handleInput('C')" class="base-btn p-4 rounded-xl bg-blue-600 hover:bg-blue-500 font-bold text-2xl shadow-lg border-b-4 border-blue-800">C</button>
                    <button onclick="handleInput('G')" class="base-btn p-4 rounded-xl bg-red-600 hover:bg-red-500 font-bold text-2xl shadow-lg border-b-4 border-red-800">G</button>
                </div>
                
                <div class="text-center mt-6">
                    <button onclick="resetGame()" class="text-sm text-slate-400 hover:text-white underline">Reset Simulation</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Assessment Section -->
    <section id="quiz" class="py-16 px-4 bg-white">
        <div class="max-w-3xl mx-auto">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-slate-800">Knowledge Check</h2>
                <p class="text-slate-500">Let's see what you remember from today's lesson.</p>
            </div>

            <div class="space-y-6" id="quizContainer">
                <!-- Question 1 -->
                <div class="border rounded-xl p-6 hover:shadow-md transition">
                    <p class="font-bold text-lg mb-4">1. What is the shape of DNA called?</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        <button onclick="checkAnswer(this, false)" class="p-3 border rounded hover:bg-slate-50 text-left">Single Ladder</button>
                        <button onclick="checkAnswer(this, true)" class="p-3 border rounded hover:bg-slate-50 text-left">Double Helix</button>
                        <button onclick="checkAnswer(this, false)" class="p-3 border rounded hover:bg-slate-50 text-left">Triple Circle</button>
                        <button onclick="checkAnswer(this, false)" class="p-3 border rounded hover:bg-slate-50 text-left">Square Wave</button>
                    </div>
                    <div class="feedback hidden mt-2 text-sm font-bold"></div>
                </div>

                <!-- Question 2 -->
                <div class="border rounded-xl p-6 hover:shadow-md transition">
                    <p class="font-bold text-lg mb-4">2. If one side of DNA has 'A' (Adenine), what must be on the other side?</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        <button onclick="checkAnswer(this, false)" class="p-3 border rounded hover:bg-slate-50 text-left">G (Guanine)</button>
                        <button onclick="checkAnswer(this, false)" class="p-3 border rounded hover:bg-slate-50 text-left">C (Cytosine)</button>
                        <button onclick="checkAnswer(this, true)" class="p-3 border rounded hover:bg-slate-50 text-left">T (Thymine)</button>
                        <button onclick="checkAnswer(this, false)" class="p-3 border rounded hover:bg-slate-50 text-left">A (Adenine)</button>
                    </div>
                    <div class="feedback hidden mt-2 text-sm font-bold"></div>
                </div>

                <!-- Question 3 -->
                <div class="border rounded-xl p-6 hover:shadow-md transition">
                    <p class="font-bold text-lg mb-4">3. Where is DNA located in the cell?</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        <button onclick="checkAnswer(this, true)" class="p-3 border rounded hover:bg-slate-50 text-left">The Nucleus</button>
                        <button onclick="checkAnswer(this, false)" class="p-3 border rounded hover:bg-slate-50 text-left">The Cell Wall</button>
                        <button onclick="checkAnswer(this, false)" class="p-3 border rounded hover:bg-slate-50 text-left">The Cytoplasm only</button>
                    </div>
                    <div class="feedback hidden mt-2 text-sm font-bold"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 py-8 text-center">
        <p>@ 2025 Generated by Gemini Pro 3.0. Prepared by SF Lau</p>
    </footer>

    <!-- Application Logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 1. Canvas Animation (The Spinning Helix) ---
            try {
                const canvas = document.getElementById('dnaCanvas');
                if(canvas) {
                    const ctx = canvas.getContext('2d');
                    let width, height;
                    let time = 0;

                    function resize() {
                        if(!canvas.parentElement) return;
                        width = canvas.width = canvas.parentElement.offsetWidth;
                        height = canvas.height = canvas.parentElement.offsetHeight;
                    }
                    window.addEventListener('resize', resize);
                    resize(); // Initial sizing

                    function drawDNA() {
                        if (!width || !height) {
                            requestAnimationFrame(drawDNA);
                            return;
                        }
                        
                        ctx.clearRect(0, 0, width, height);
                        
                        const strands = 2;
                        const baseAmplitude = 60; 
                        // "Breathing" effect
                        const breathing = Math.sin(time * 0.5) * 15;
                        const amplitude = baseAmplitude + breathing;

                        const frequency = 0.015; 
                        const speed = 0.025; 
                        const particles = Math.floor(width / 12); // More dense

                        for (let i = 0; i < particles; i++) {
                            const x = i * 12;
                            
                            // Strand 1 Y position
                            const y1 = height / 2 + Math.sin(x * frequency + time) * amplitude;
                            // Strand 2 Y position (Phase shifted)
                            const y2 = height / 2 + Math.sin(x * frequency + time + Math.PI) * amplitude;

                            // Draw connector (Base Pairs)
                            ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)'; // Brighter
                            ctx.lineWidth = 2;
                            ctx.beginPath();
                            ctx.moveTo(x, y1);
                            ctx.lineTo(x, y2);
                            ctx.stroke();

                            // Draw Strand 1 Particles (Brighter Colors)
                            ctx.fillStyle = '#a5b4fc'; // Indigo-300
                            ctx.beginPath();
                            ctx.arc(x, y1, 4, 0, Math.PI * 2); // Larger particles
                            ctx.fill();

                            // Draw Strand 2 Particles
                            ctx.fillStyle = '#e9d5ff'; // Purple-200
                            ctx.beginPath();
                            ctx.arc(x, y2, 4, 0, Math.PI * 2); // Larger particles
                            ctx.fill();
                        }

                        time += speed;
                        requestAnimationFrame(drawDNA);
                    }
                    
                    // Start animation
                    drawDNA();
                }
            } catch(e) {
                console.error("Canvas animation failed:", e);
                // Fallback: Ensure text is still visible
            }


            // --- 2. Game Logic ---
            try {
                const bases = ['A', 'T', 'C', 'G'];
                const pairs = { 'A': 'T', 'T': 'A', 'C': 'G', 'G': 'C' };
                let currentSequence = [];
                let currentIndex = 0;
                let score = 0;
                
                const templateDiv = document.getElementById('templateStrand');
                const userDiv = document.getElementById('userStrand');
                const scoreDisplay = document.getElementById('scoreDisplay');
                const gameStatus = document.getElementById('gameStatus');

                if (templateDiv && userDiv) { // Guard clause
                    function generateLevel() {
                        currentSequence = [];
                        templateDiv.innerHTML = '';
                        userDiv.innerHTML = '';
                        currentIndex = 0;
                        gameStatus.innerText = "Match the bases!";
                        gameStatus.className = "font-bold text-yellow-400";

                        // Generate 5 bases for the round
                        for(let i=0; i<5; i++) {
                            const base = bases[Math.floor(Math.random() * bases.length)];
                            currentSequence.push(base);

                            // Create UI Element for Template
                            const tBlock = document.createElement('div');
                            tBlock.className = `w-10 h-10 md:w-16 md:h-16 rounded-lg flex items-center justify-center font-bold text-xl border-2 border-slate-600 bg-slate-700 text-slate-300`;
                            tBlock.innerText = base;
                            templateDiv.appendChild(tBlock);

                            // Create Empty UI Element for User
                            const uBlock = document.createElement('div');
                            uBlock.id = `user-slot-${i}`;
                            uBlock.className = `w-10 h-10 md:w-16 md:h-16 rounded-lg flex items-center justify-center font-bold text-xl border-2 border-dashed border-slate-500 bg-slate-800/50 text-white transition-all`;
                            uBlock.innerText = '?';
                            userDiv.appendChild(uBlock);
                        }
                        
                        // Highlight first slot
                        highlightSlot(0);
                    }

                    function highlightSlot(index) {
                        if (index < 5) {
                            const el = document.getElementById(`user-slot-${index}`);
                            if(el) el.classList.add('border-yellow-500', 'bg-slate-700');
                        }
                    }

                    window.handleInput = function(inputBase) {
                        if (currentIndex >= 5) return; // Level complete

                        const targetBase = currentSequence[currentIndex];
                        const correctBase = pairs[targetBase];
                        const slot = document.getElementById(`user-slot-${currentIndex}`);

                        if (inputBase === correctBase) {
                            // Correct
                            slot.innerText = inputBase;
                            slot.classList.remove('border-dashed', 'border-yellow-500', 'bg-slate-800/50');
                            
                            // Add pop animation class
                            slot.classList.add('animate-pop');

                            // Color coding
                            if(inputBase === 'A') slot.classList.add('bg-green-600', 'border-green-400');
                            if(inputBase === 'T') slot.classList.add('bg-yellow-600', 'border-yellow-400');
                            if(inputBase === 'C') slot.classList.add('bg-blue-600', 'border-blue-400');
                            if(inputBase === 'G') slot.classList.add('bg-red-600', 'border-red-400');

                            score += 10;
                            scoreDisplay.innerText = score;
                            currentIndex++;

                            if(currentIndex === 5) {
                                gameStatus.innerText = "Sequence Complete! (+50 Bonus)";
                                gameStatus.className = "font-bold text-green-400";
                                score += 50;
                                scoreDisplay.innerText = score;
                                setTimeout(generateLevel, 1500); // Next level
                            } else {
                                highlightSlot(currentIndex);
                            }
                        } else {
                            // Wrong
                            gameStatus.innerText = "Incorrect Pair! Try again.";
                            gameStatus.className = "font-bold text-red-400";
                            slot.classList.add('animate-pulse', 'bg-red-900');
                            setTimeout(() => slot.classList.remove('animate-pulse', 'bg-red-900'), 500);
                        }
                    };

                    window.resetGame = function() {
                        score = 0;
                        scoreDisplay.innerText = "0";
                        generateLevel();
                    };

                    // Initialize Game
                    generateLevel();
                }
            } catch(e) {
                console.error("Game logic failed:", e);
            }

            // --- 3. Quiz Logic (Global functions) ---
            window.checkAnswer = function(btn, isCorrect) {
                const parent = btn.parentElement;
                const feedback = parent.nextElementSibling;
                
                // Disable all buttons in this question
                const buttons = parent.getElementsByTagName('button');
                for(let b of buttons) {
                    b.disabled = true;
                    b.classList.add('opacity-50', 'cursor-not-allowed');
                }

                feedback.classList.remove('hidden');
                
                if(isCorrect) {
                    btn.classList.remove('opacity-50');
                    btn.classList.add('bg-green-100', 'border-green-500', 'text-green-800');
                    feedback.innerText = "‚úÖ Correct! Good job.";
                    feedback.classList.add('text-green-600');
                } else {
                    btn.classList.remove('opacity-50');
                    btn.classList.add('bg-red-100', 'border-red-500', 'text-red-800');
                    feedback.innerText = "‚ùå Not quite. Review the notes above!";
                    feedback.classList.add('text-red-600');
                }
            };

        });
    </script>
</body>
</html>